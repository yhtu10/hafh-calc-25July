<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>HafH 2025 é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body { height: 100%; margin: 0; }
    body {
      font-family: "Noto Sans TC", "Microsoft JhengHei", Arial, sans-serif;
      background: #f9f9f9;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding-top: 40px;
    }
    h1 {
      color: #222;
      margin-bottom: 16px;
      font-weight: 700;
      letter-spacing: 1.5px;
      text-align: center;
    }
    .intro {
      color: #444; text-align: center; margin-bottom: 20px; line-height: 1.7;
      font-size: 1.07em;
    }
    .input-group {
      display: flex; flex-direction: column; align-items: center;
      margin-bottom: 18px; background: #fff;
      padding: 28px 32px 18px 32px; border-radius: 14px;
      box-shadow: 0 2px 16px 0 #eee;
      min-width: 360px;
    }
    label {
      margin-top: 8px; margin-bottom: 2px; font-weight: 600;
    }
    input {
      margin-bottom: 12px; padding: 7px 10px;
      width: 210px; border-radius: 5px; border: 1px solid #bdbdbd;
      font-size: 1.06em; background: #f5f7fa;
      transition: border-color .2s;
    }
    input:focus { border: 1.6px solid #1a73e8; outline: none; }
    button {
      padding: 12px 32px; background: #3caf48;
      color: white; border: none; border-radius: 5px;
      cursor: pointer; font-size: 17px; margin-top: 2px;
      transition: background .18s;
      font-weight: 500;
    }
    button:hover { background: #318837;}
    .pack-info {
      background: #fff; padding: 18px 28px; border-radius: 10px;
      margin: 18px 0 24px 0; line-height: 1.7; font-size: 15.5px;
      width: 100%; max-width: 580px; text-align: left;
      box-shadow: 0 2px 12px 0 #f1f3f6;
      margin-bottom: 32px;
    }
    .pack-info-table {
      display: flex; gap: 36px; flex-wrap: wrap; margin-top: 10px; align-items: flex-start;
    }
    .pack-info-col {
      flex:1 1 220px; min-width:180px;
    }
    .pack-info-col table {
      border-collapse: collapse; width: 100%; margin-top: 3px;
    }
    .pack-info-col td {
      padding: 4px 10px 4px 0; font-size: 1.08em;
    }
    .pack-info-col tr td:last-child {
      text-align: right; color: #212121; font-weight: 500;
    }
    .pack-info-col .note {
      font-size:0.95em; color:#a67c13; margin-top:2px; margin-bottom:5px;
    }
    .pack-info-col .note2 { color:#18833b;}
    .pack-info-col .title1 { font-weight:700; margin-bottom:4px; color:#ed921b;}
    .pack-info-col .title2 { font-weight:700; margin-bottom:4px; color:#18833b;}
    .result-list {
      width: 100%; display: flex; flex-direction: column; align-items: center;
      gap: 24px; margin: 0;
    }
    .result {
      background: #fff;
      padding: 32px 38px;
      border-radius: 14px;
      box-shadow: 0 2px 14px 0 #ebeff2;
      width: 100%; max-width: 560px;
      margin: 0 auto 0 auto;
      text-align: left;
      margin-bottom: 0;
    }
    .result h2 { margin: 0 0 15px 0; font-size: 1.23em; font-weight: 700; letter-spacing: 0.5px;}
    .result ul { margin: 0 0 12px 0; padding-left: 21px; line-height: 1.85;}
    .combo-list { margin: 0 0 0 0; padding: 0; list-style: none; }
    .combo-list li { margin: 0 0 0 0; padding: 0 0 0 0; line-height: 1.7; }
    .cost { color: #b71c1c; font-weight: bold; margin-top: 10px; font-size: 1.11em;}
    .official { color: #444; font-size: 0.98em; margin-top: 2px;}
    .compare { color: #1565c0; font-weight: bold; margin-top: 7px;}
    .footer {
      font-size: 0.99em; color: #666; margin-top: 40px; line-height: 1.8;
      max-width: 600px; text-align: left; margin-left: auto; margin-right: auto;
      background: #f7f7fb; border-radius: 10px; padding: 22px 32px;
      box-shadow: 0 1px 6px 0 #e9ebf0;
    }
    @media (max-width: 700px) {
      .container { padding: 8px 0;}
      .input-group, .result, .pack-info, .footer {
        max-width: 97vw; padding: 18px 5vw;
        min-width: unset;
      }
      .result { padding: 22px 6vw;}
      .pack-info { padding: 12px 4vw; }
    }
    @media (max-width: 440px) {
      .result, .pack-info, .footer { padding: 10px 2vw;}
    }
  </style>
  <script>
    // ä»£å¹£çµ„åˆ
    const packs = [
      { label: "æ–°æ‰‹åŒ… 100 â’½", hc: 100, cost: 720, type: "starter" },
      { label: "æ–°æ‰‹åŒ… 300 â’½", hc: 300, cost: 2040, type: "starter" },
      { label: "æ–°æ‰‹åŒ… 600 â’½", hc: 600, cost: 3840, type: "starter" },
      { label: "æŒ‡å®šä»£å¹£çµ„åˆ 200 â’½", hc: 200, cost: 1440, type: "extra" }
    ];
    function getMinCostPackage(diff) {
      let best = null;
      function search(remain, combo, bought, total) {
        if (remain <= 0) {
          if (!best || total < best.total) best = { combo: [...combo], total };
          return;
        }
        for (let p of packs) {
          if (p.type === "starter" && bought[p.label]) continue;
          combo.push(p);
          let nbought = { ...bought };
          if (p.type === "starter") nbought[p.label] = true;
          search(remain - p.hc, combo, nbought, total + p.cost);
          combo.pop();
        }
      }
      search(diff, [], {}, 0);
      let packMap = {};
      for (let p of best.combo) packMap[p.label] = (packMap[p.label] || 0) + 1;
      return { packMap, total: best.total };
    }
    function formatCurrency(num) {
      return "NT$" + num.toLocaleString();
    }
    function percentCompare(cost, price) {
      if (!price || price === 0) return "-";
      let pct = Math.round((cost / price) * 1000) / 10;
      return `èˆ‡æ‚¨æä¾›çš„å®˜ç¶²åƒ¹æ ¼ç›¸æ¯”ç´„ç‚º ${pct}%`;
    }
    function comboList(map) {
      let lines = [];
      for (let [k, v] of Object.entries(map)) {
        lines.push(`${k} Ã—${v}ï¼ˆ${formatCurrency(packs.find(p=>p.label===k).cost * v)}ï¼‰`);
      }
      return lines;
    }
    function showResult() {
      const hafhHC = parseInt(document.getElementById("hafhHC").value);
      const officialPrice = parseInt(document.getElementById("officialPrice").value);
      const output = document.getElementById("output");
      output.innerHTML = "";

      // æ–¹æ¡ˆA
      let hcNeededA = hafhHC, hcStartA = 300, hcDiffA = hcNeededA - hcStartA;
      let minA = hcDiffA > 0 ? getMinCostPackage(hcDiffA) : { packMap: {}, total: 0 };
      let totalA = 439 + minA.total;
      let comboA = comboList(minA.packMap);
      let htmlA = `
        <div class="result">
        <h2>æ–¹æ¡ˆ Aï½œä¸€äººç”³è¾¦æ–°æœƒå“¡</h2>
        <ul>
          <li>å¸³è™Ÿé–‹å±€ç‚º 300 â’½ï¼Œå¯¦éš›éœ€è¦ ${hcNeededA} â’½ï¼Œå·®é¡ ${hcDiffA > 0 ? hcDiffA : 0} â’½</li>
          ${comboA.length ? `<li>åŠ è³¼ä»£å¹£çµ„åˆï¼š</li>
            <ul class="combo-list"><li>${comboA.join('<br>ï¼‹')}</li></ul>` : ""}
          <li>é¦–æœˆæœƒè²»ï¼š${formatCurrency(439)}</li>
        </ul>
        <div class="cost">ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalA)}</div>
        <div class="official">å®˜ç¶²åƒ¹æ ¼ï¼š${formatCurrency(officialPrice)}</div>
        <div class="compare">${percentCompare(totalA, officialPrice)}</div>
        </div>
      `;

      // æ–¹æ¡ˆB
      let hcEachB = Math.ceil(hafhHC / 2);
      let hcDiffB = hcEachB - 300;
      let minB = hcDiffB > 0 ? getMinCostPackage(hcDiffB) : { packMap: {}, total: 0 };
      let totalEachB = 439 + minB.total;
      let totalCostB = totalEachB * 2;
      let comboB = comboList(minB.packMap);
      let htmlB = `
        <div class="result">
        <h2>æ–¹æ¡ˆ Bï½œå…©äººåŒæ™‚ç”³è¾¦æ–°æœƒå“¡ï¼ˆåˆ†æ”¤é è¨‚ï¼‰</h2>
        <ul>
          <li>æˆ¿åƒ¹ ${hafhHC} â’½ æ‹†åŠå¾Œæ¯äººéœ€ ${hcEachB} â’½ï¼Œå¸³è™Ÿé–‹å±€ 300 â’½ï¼Œå·®é¡ ${hcDiffB > 0 ? hcDiffB : 0} â’½ï¼äºº</li>
          ${comboB.length ? `<li>æ¯äººåŠ è³¼ä»£å¹£çµ„åˆï¼š</li>
            <ul class="combo-list"><li>${comboB.join('<br>ï¼‹')}</li></ul>` : ""}
          <li>é¦–æœˆæœƒè²»ï¼š${formatCurrency(439)}ï¼äºº</li>
        </ul>
        <div class="cost">ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalCostB)}ï¼ˆ${formatCurrency(totalEachB)}ï¼äººï¼‰</div>
        <div class="official">å®˜ç¶²åƒ¹æ ¼ï¼š${formatCurrency(officialPrice)}</div>
        <div class="compare">${percentCompare(totalCostB, officialPrice)}</div>
        </div>
      `;

      // æ–¹æ¡ˆC
      let hcEachC = hcEachB;
      let oldNeed = hcEachC;
      let oldBuy = Math.ceil(oldNeed / 200);
      let oldCostC = oldBuy * 1440;
      let friendDiffC = hcEachC - 300;
      let minC = friendDiffC > 0 ? getMinCostPackage(friendDiffC) : { packMap: {}, total: 0 };
      let totalC = oldCostC + 439 + minC.total;
      let comboC = comboList(minC.packMap);
      let htmlC = `
        <div class="result">
        <h2>æ–¹æ¡ˆ Cï½œèˆŠæœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½</h2>
        <ul>
          <li>èˆŠæœƒå“¡èˆ‡æœ‹å‹å„éœ€ ${hcEachC} â’½ï¼ŒèˆŠæœƒå“¡å…¨é¡åŠ è³¼ï¼ˆæŒ‡å®šä»£å¹£çµ„åˆ 200 â’½ Ã—${oldBuy}ï¼Œ${formatCurrency(oldCostC)}ï¼‰</li>
          <li>æœ‹å‹é¦–æ¬¡åŠ å…¥æœˆè²»ï¼š${formatCurrency(439)}</li>
          ${comboC.length ? `<li>æœ‹å‹åŠ è³¼ä»£å¹£çµ„åˆï¼š</li>
            <ul class="combo-list"><li>${comboC.join('<br>ï¼‹')}</li></ul>` : ""}
        </ul>
        <div class="cost">ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalC)}</div>
        <div class="official">å®˜ç¶²åƒ¹æ ¼ï¼š${formatCurrency(officialPrice)}</div>
        <div class="compare">${percentCompare(totalC, officialPrice)}</div>
        </div>
      `;

      // æ–°æ‰‹åŒ…èªªæ˜ï¼ˆæ–°ç‰ˆï¼‰
      let packInfo = `<div class="pack-info">
        <strong style="font-size:1.12em; color:#2152d9; letter-spacing:0.5px;">
          HafH ä»£å¹£è³¼è²·èªªæ˜
        </strong>
        <div class="pack-info-table">
          <div class="pack-info-col">
            <div class="title1">
              ğŸ æ–°æ‰‹åŒ…
              <span style="font-size:0.97em; font-weight:400;">ï¼ˆé™æ–°æœƒå“¡é¦–æ¬¡è¨»å†Šï¼Œå„çµ„é™è³¼ 1 æ¬¡ï¼‰</span>
            </div>
            <table>
              <tr><td>100 <span style="font-family:sans-serif;">â’½</span></td><td>NT$720</td></tr>
              <tr><td>300 <span style="font-family:sans-serif;">â’½</span></td><td>NT$2,040</td></tr>
              <tr><td>600 <span style="font-family:sans-serif;">â’½</span></td><td>NT$3,840</td></tr>
            </table>
            <div class="note">è¨»ï¼šæ–°æ‰‹åŒ…åƒ…åœ¨æ–°æœƒå“¡è¨»å†Šæ™‚å¯è³¼è²·ï¼Œå„çµ„é™è³¼ä¸€æ¬¡ã€‚</div>
          </div>
          <div class="pack-info-col">
            <div class="title2">
              ğŸ”„ æŒ‡å®šä»£å¹£çµ„åˆ
              <span style="font-size:0.97em; font-weight:400;">ï¼ˆä¸é™æ¬¡æ•¸ï¼Œä»˜è²»æœƒå“¡çš†å¯è³¼è²·ï¼‰</span>
            </div>
            <table>
              <tr><td>200 <span style="font-family:sans-serif;">â’½</span></td><td>NT$1,440</td></tr>
            </table>
            <div class="note note2">è¨»ï¼šæŒ‡å®šä»£å¹£çµ„åˆè³¼è²·ç„¡ä¸Šé™ï¼Œæœƒå“¡æœŸé–“éš¨æ™‚å¯è³¼è²·ã€‚</div>
          </div>
        </div>
      </div>`;

      // è¼¸å‡º
      output.innerHTML =
        packInfo +
        `<div class="result-list">${htmlA + htmlB + htmlC}</div>
        <div class="footer">
        <strong>æº«é¦¨æé†’ï¼š</strong><br>
        1. æ­¤è©¦ç®—é é¢ç‚ºç²—ç•¥ä¼°ç®—ï¼Œç‚ºæ±‚è¬¹æ…è«‹è‡ªè¡Œä¾ç…§é‚è¼¯å†æ¬¡è©¦ç®—ä¸€éã€‚<br>
        2. ä»˜è²»åŠ å…¥ç•¶å¤©ç‚ºçµç®—æ—¥ï¼Œä¸”ç‚ºç¬¬ä¸€æ¬¡æ‰£æ¬¾ã€‚åˆ°ç¬¬ä¸‰æ¬¡æ‰£æ¬¾æ™‚å¸³è™Ÿæœƒå‡ç´šç‚º Silver VIPï¼Œäº«æœ‰æ¯ç­†è¨‚æˆ¿ 95 æŠ˜ã€‚<br>
        3. æœ‰é ç´„çš„ç‹€æ³ä¸‹ç„¡æ³•è®Šæ›´ç‚ºä¼‘çœ æœƒç±ï¼Œè‹¥é ç´„æ—¥æœŸè·é›¢ç¾åœ¨é‚„æœƒç¶“éä¸€æ¬¡çµç®—æ—¥ï¼Œå‰‡æœƒæœ‰æ‰£æ¬¾ä¸¦åŒæ™‚æœ‰ 200 â’½ å…¥å¸³ã€‚
        </div>`;
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>HafH 2025 é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</h1>
    <div class="intro">
      <b>æé†’ï¼š</b>æ–°æœƒå“¡é è¨­å¸³æˆ¶æœ‰ 300 â’½ï¼Œæ‰€æœ‰è¨ˆç®—ä»¥æ­¤ç‚ºå‰æã€‚è«‹å¡«å¯«ç¬¦åˆç›¸åŒæ¢ä»¶ï¼ˆæ—¥æœŸã€äººæ•¸ã€å–æ¶ˆè¦å‰‡ï¼‰ä¸”ç‚ºæ–°å°å¹£çš„é‡‘é¡ã€‚
    </div>
    <div class="input-group">
      <label>HafH æ‰€éœ€ â’½ æ•¸ï¼š</label>
      <input id="hafhHC" type="number" value="750">
      <label>å®˜ç¶²åƒ¹æ ¼ï¼ˆNT$ï¼‰ï¼š</label>
      <input id="officialPrice" type="number" value="4400">
      <button onclick="showResult()">è¨ˆç®—</button>
    </div>
    <div id="output" style="width:100%"></div>
  </div>
</body>
</html>
