<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>HafH Taiwan 2025 é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand-main: #7149CE;
      --brand-dark: #342D3E;
      --brand-bg: #F6F6F8;
      --gray-text: #7D7485;
      --accent-coin: #F0E179;
      --accent-info: #7149CE;
      --danger: #F96983;
      --success: #1DBACE;
      --white: #fff;
      --soft-gray: #E8E8EC;
    }
    body {
      background: var(--brand-bg);
      font-family: 'Noto Sans TC', 'Segoe UI', Arial, 'Microsoft JhengHei', sans-serif;
      color: var(--brand-dark);
      margin: 0;
      min-height: 100vh;
      line-height: 1.7;
    }
    .container {
      max-width: 460px;
      margin: 38px auto 40px auto;
      padding: 0 8px;
    }
    .title {
      font-size: 2.2em;
      font-weight: 700;
      letter-spacing: 1.2px;
      margin-bottom: 8px;
      text-align: center;
      color: var(--brand-dark);
    }
    .subtitle-list {
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 2px 8px #0001;
      padding: 22px 18px 17px 28px;
      margin-bottom: 34px;
    }
    .subtitle-list li {
      font-size: 1em;
      color: var(--gray-text);
      margin-bottom: 7px;
      list-style-type: disc;
    }
    .info-block {
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 2px 8px #0001;
      padding: 26px 24px 14px 24px;
      margin-bottom: 32px;
    }
    .info-title {
      font-size: 1.18em;
      font-weight: 700;
      margin-bottom: 2px;
      letter-spacing: 0.5px;
      color: var(--brand-dark);
    }
    .info-sub {
      font-size: 0.98em;
      color: var(--gray-text);
      margin-bottom: 15px;
    }
    .coin-table {
      font-size: 1.05em;
      color: var(--brand-dark);
      margin-bottom: 0;
      letter-spacing: 0.1px;
    }
    .coin-desc {
      font-size: 0.97em;
      color: var(--brand-main);
      margin-top: 10px;
      margin-bottom: 14px;
      line-height: 1.6;
    }
    .info-title2 {
      font-size: 1.13em;
      font-weight: 700;
      margin-top: 17px;
      margin-bottom: 2px;
      color: var(--brand-dark);
    }
    .info-sub2 {
      font-size: 0.98em;
      color: var(--gray-text);
      margin-bottom: 12px;
    }
    .coin-table2 {
      font-size: 1.05em;
      color: var(--brand-dark);
      margin-bottom: 0;
    }
    .coin-desc2 {
      font-size: 0.97em;
      color: var(--accent-info);
      margin-top: 10px;
      margin-bottom: 10px;
      line-height: 1.6;
    }
    .input-block {
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 2px 8px #0001;
      padding: 24px 20px 18px 20px;
      margin-bottom: 28px;
    }
    .input-label {
      font-size: 1.05em;
      font-weight: 500;
      margin-bottom: 4px;
      display: block;
      color: var(--brand-dark);
    }
    .input-block input[type="number"] {
      width: 100%;
      font-size: 1.05em;
      padding: 8px 10px;
      border: 1px solid #bbb;
      border-radius: 8px;
      background: #f6f6f6;
      color: #333;
      margin-bottom: 14px;
      box-sizing: border-box;
      outline: none;
    }
    .input-block button {
      background: var(--brand-main);
      color: var(--white);
      border: none;
      border-radius: 8px;
      font-size: 1.13em;
      font-weight: 700;
      padding: 11px 0;
      width: 100%;
      margin-top: 6px;
      cursor: pointer;
      transition: background .13s;
    }
    .input-block button:hover { background: #532da9; }
    .result-block {
      background: var(--white);
      border-radius: 14px;
      box-shadow: 0 2px 8px #0001;
      margin-bottom: 26px;
      padding: 26px 24px 19px 24px;
      min-width: 0;
    }
    .result-block h2 {
      font-size: 1.15em;
      font-weight: 700;
      color: var(--brand-dark);
      margin: 0 0 11px 0;
      line-height: 1.5;
    }
    .result-block ul {
      margin: 0 0 10px 0;
      padding-left: 1.2em;
      font-size: 1em;
      color: var(--gray-text);
    }
    .cost-summary {
      display: flex;
      align-items: baseline;
      gap: 12px;
      margin-top: 12px;
      margin-bottom: 4px;
    }
    .cost-label {
      font-size: 1.08em;
      color: var(--brand-dark);
      min-width: 4.5em;
      font-weight: 500;
    }
    .cost-main {
      font-size: 1.55em;
      font-weight: 700;
      color: var(--brand-dark);
      letter-spacing: 0.2px;
      margin-right: 10px;
    }
    .cost-pct {
      font-size: 1.08em;
      font-weight: 700;
      margin-left: auto;
      letter-spacing: 0.5px;
    }
    .cost-pct.good { color: var(--accent-info);}
    .cost-pct.bad { color: var(--danger);}
    .footer-tip {
      background: var(--white);
      margin: 26px auto 0 auto;
      max-width: 430px;
      border-radius: 11px;
      box-shadow: 0 3px 18px #0001;
      padding: 17px 17px 12px 20px;
      color: var(--gray-text);
      font-size: 1em;
      line-height: 1.65;
      margin-bottom: 24px;
    }
    @media (max-width: 540px) {
      .container { max-width: 100vw; }
      .subtitle-list, .info-block, .input-block, .result-block, .footer-tip { padding-left: 7vw; padding-right: 7vw;}
    }
  </style>
</head>
<body>
<div class="container">
  <div class="title">HafH Taiwan 2025<br>é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</div>
  <ul class="subtitle-list">
    <li>æ–°æœƒå“¡é è¨­ä½¿ç”¨é‚€è«‹ç¢¼åŠ å…¥ï¼Œå³å¸³æˆ¶æœ‰ 300 â’½ï¼Œæ‰€æœ‰è¨ˆç®—ä»¥æ­¤ç‚ºå‰æã€‚</li>
    <li>è«‹è¼¸å…¥èˆ‡å®˜æ–¹ç¶²ç«™ç›¸åŒæ¢ä»¶çš„é‡‘é¡ï¼ˆå¦‚æ—¥æœŸã€äººæ•¸ã€å–æ¶ˆè¦å‰‡ï¼‰ï¼Œä¸”çš†ç‚ºæ–°å°å¹£ã€‚</li>
    <li>ç”¨æˆ¶è‡ªè£½å°å·¥å…·ï¼Œå¯èƒ½æœ‰ bugï¼Œåƒ…ä¾›åƒè€ƒã€‚</li>
  </ul>
  <div class="info-block">
    <div class="info-title">æ–°æ‰‹åŒ…</div>
    <div class="info-sub">ï¼ˆé™æ–°æœƒå“¡é¦–æ¬¡è¨»å†Šï¼Œå„çµ„é™è³¼ 1 æ¬¡ï¼‰</div>
    <div class="coin-table">
      100 â’½ã€€NT$720 (9æŠ˜å„ªæƒ )<br>
      300 â’½ã€€NT$2,040 (85æŠ˜å„ªæƒ )<br>
      600 â’½ã€€NT$3,840 (8æŠ˜å„ªæƒ )
    </div>
    <div class="coin-desc">
      æ–°æ‰‹åŒ…åƒ…åœ¨æ–°æœƒå“¡ä»˜è²»åŠ å…¥å¾Œï¼Œ7/28 å‰å¯è³¼è²·ï¼Œå„çµ„é™è³¼ä¸€æ¬¡ã€‚
    </div>
    <div class="info-title2">æŒ‡å®šä»£å¹£çµ„åˆ</div>
    <div class="info-sub2">ï¼ˆä¸é™æ¬¡æ•¸ï¼Œä»˜è²»æœƒå“¡çš†å¯è³¼è²·ï¼‰</div>
    <div class="coin-table2">
      200 â’½ã€€NT$1,440 (9æŠ˜å„ªæƒ )
    </div>
    <div class="coin-desc2">
      æŒ‡å®šä»£å¹£çµ„åˆå¯è³¼è²·ç›´åˆ°å¸³è™Ÿä¸Šé™ï¼Œ7/28 å‰éš¨æ™‚å¯è³¼è²·ã€‚
    </div>
  </div>
  <form class="input-block" onsubmit="showResult(); return false;">
    <label class="input-label">HafH æ‰€éœ€ â’½ æ•¸ï¼š</label>
    <input id="hafhHC" type="number" placeholder="è«‹è¼¸å…¥æ•¸å­—ï¼Œä¾‹å¦‚ 430">
    <label class="input-label">å®˜ç¶²åƒ¹æ ¼ï¼ˆNT$ï¼‰ï¼š</label>
    <input id="officialPrice" type="number" placeholder="è«‹è¼¸å…¥æ•¸å­—ï¼Œä¾‹å¦‚ 4400">
    <button type="submit">è¨ˆç®—</button>
  </form>
  <div id="output"></div>
  <div class="footer-tip">
    1. æ­¤è©¦ç®—é é¢ç‚ºç²—ç•¥ä¼°ç®—ï¼Œè«‹å‹™å¿…è‡ªè¡Œä¾ç…§æ©Ÿåˆ¶å†å¤šæ¬¡è©¦ç®—ä¸€éã€‚<br>
    2. ä»˜è²»åŠ å…¥ç•¶å¤©ç‚ºçµç®—æ—¥ï¼Œä¸”ç‚ºç¬¬ä¸€æ¬¡æ‰£æ¬¾ã€‚åˆ°ç¬¬ä¸‰æ¬¡æ‰£æ¬¾æ™‚å¸³è™Ÿæœƒå‡ç´šç‚º Silver VIPï¼Œäº«æœ‰æ¯ç­†è¨‚æˆ¿ 95 æŠ˜ã€‚<br>
    3. æœ‰é ç´„çš„ç‹€æ³ä¸‹ç„¡æ³•è®Šæ›´ç‚ºä¼‘çœ æœƒç±ã€‚è‹¥æœ‰è·¨æœˆå‰‡éœ€è€ƒæ…®æ˜¯å¦ç¶“éçµç®—æ—¥ã€‚æ‰£æ¬¾åŒæ™‚äº¦æœ‰ 200 â’½ å…¥å¸³ã€‚
  </div>
</div>
<script>
function format(num) {
  return "NT$" + num.toLocaleString();
}
function formatPercent(num) {
  return (num*100).toFixed(1) + "%";
}
function getTokenPurchasePlan(diff) {
  if (diff <= 0) return [];
  const packs = [
    { type: 'starter', qty: 100, price: 720, max: 1 },
    { type: 'starter', qty: 300, price: 2040, max: 1 },
    { type: 'starter', qty: 600, price: 3840, max: 1 },
    { type: 'regular', qty: 200, price: 1440, max: 99 }
  ];
  let maxToken = diff + 600;
  let cost = Array(maxToken+1).fill(Infinity);
  let path = Array(maxToken+1).fill(null);
  cost[0] = 0;
  path[0] = [];
  for (let s100 = 0; s100 <= 1; ++s100)
  for (let s300 = 0; s300 <= 1; ++s300)
  for (let s600 = 0; s600 <= 1; ++s600) {
    let tokens = 100*s100 + 300*s300 + 600*s600;
    let amount = 720*s100 + 2040*s300 + 3840*s600;
    for (let r = 0; r <= Math.ceil(maxToken/200); ++r) {
      let totalTokens = tokens + 200*r;
      let totalAmount = amount + 1440*r;
      if (totalTokens >= diff && totalTokens <= maxToken) {
        if (totalAmount < cost[totalTokens]) {
          cost[totalTokens] = totalAmount;
          path[totalTokens] = [
            { type: 'starter', qty: 100, price: 720, count: s100 },
            { type: 'starter', qty: 300, price: 2040, count: s300 },
            { type: 'starter', qty: 600, price: 3840, count: s600 },
            { type: 'regular', qty: 200, price: 1440, count: r }
          ].filter(p => p.count > 0);
        }
      }
    }
  }
  let min = Infinity, minPlan = null;
  for (let t = diff; t <= maxToken; ++t) {
    if (cost[t] < min) {
      min = cost[t];
      minPlan = path[t];
    }
  }
  return minPlan || [];
}

function showResult() {
  const hafhHC = parseInt(document.getElementById('hafhHC').value, 10);
  const officialPrice = parseInt(document.getElementById('officialPrice').value, 10);
  if (isNaN(hafhHC) || isNaN(officialPrice) || hafhHC <= 0 || officialPrice <= 0) {
    document.getElementById('output').innerHTML = '<div style="color:#d00;padding:1.5em 0;font-weight:bold;text-align:center;">è«‹æ­£ç¢ºè¼¸å…¥æ‰€éœ€ HafH ä»£å¹£èˆ‡å®˜ç¶²åƒ¹æ ¼</div>';
    return;
  }
  // æ–¹æ¡ˆ A
  let diffA = Math.max(0, hafhHC - 300);
  let purchaseA = getTokenPurchasePlan(diffA);
  let totalCostA = 439;
  if (purchaseA.length > 0) totalCostA += purchaseA.reduce((sum, p) => sum + p.price * p.count, 0);
  let percentA = totalCostA / officialPrice;

  // æ–¹æ¡ˆ B
  let perPerson = Math.ceil(hafhHC/2);
  let diffB = Math.max(0, perPerson - 300);
  let purchaseB = getTokenPurchasePlan(diffB);
  let totalCostB = 439*2;
  if (purchaseB.length > 0) totalCostB += purchaseB.reduce((sum, p) => sum + p.price * p.count, 0) * 2;
  let percentB = totalCostB / officialPrice;

  // æ–¹æ¡ˆ C
  let diffC_old = perPerson;
  let purchaseC_old = getTokenPurchasePlan(diffC_old).filter(p=>p.type==='regular'||p.type==='starter'&&p.qty!==100&&p.qty!==300&&p.qty!==600); // èˆŠæœƒå“¡åªèƒ½è²·regular
  if(purchaseC_old.length==0){ // fallback
    let numPack = Math.ceil(diffC_old/200);
    purchaseC_old = [{type:'regular',qty:200,price:1440,count:numPack}];
  }
  let totalCostC_old = purchaseC_old.reduce((sum, p) => sum + p.price * p.count, 0);
  // æ–°æœƒå“¡åŠ è³¼
  let diffC_new = perPerson-300;
  let purchaseC_new = getTokenPurchasePlan(Math.max(0,diffC_new));
  let totalCostC_new = 439;
  if(purchaseC_new.length > 0) totalCostC_new += purchaseC_new.reduce((sum, p) => sum + p.price * p.count, 0);
  let totalCostC = totalCostC_old + totalCostC_new;
  let percentC = totalCostC / officialPrice;

  // æ–¹æ¡ˆèªªæ˜å€
  function purchaseList(p) {
    if (!p.length) return "é¤˜é¡è¶³å¤ ç„¡éœ€åŠ è³¼";
    return p.map(x => 
      (x.type==='starter'?"æ–°æ‰‹åŒ… ":"æŒ‡å®šä»£å¹£çµ„åˆ ")+x.qty+" â’½ Ã—"+x.count+"ï¼ˆ"+format(x.price*x.count)+"ï¼‰"
    ).join("<br>");
  }
  let html = '';

  html += `
  <div class="result-block">
    <h2>æ–¹æ¡ˆ Aï½œä¸€äººç”³è¾¦æ–°æœƒå“¡</h2>
    <ul>
      <li>å¸³è™Ÿé–‹å±€ç‚º 300 â’½ã€€å¯¦éš›éœ€ ${hafhHC} â’½ã€€å·®é¡ ${diffA} â’½</li>
      <li>åŠ è³¼ä»£å¹£çµ„åˆï¼š${purchaseList(purchaseA)}</li>
      <li>é¦–æœˆæœƒè²»ï¼š${format(439)}</li>
    </ul>
    <div class="cost-summary">
      <span class="cost-label">ç¸½æˆæœ¬ï¼š</span>
      <span class="cost-main">${format(totalCostA)}</span>
    </div>
    <div class="cost-summary">
      <span class="cost-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
      <span class="cost-main">${format(officialPrice)}</span>
      <span class="cost-pct ${percentA >= 1 ? 'bad' : 'good'}">ç´„ç‚º${formatPercent(percentA)}</span>
    </div>
  </div>
  `;
  html += `
  <div class="result-block">
    <h2>æ–¹æ¡ˆ Bï½œå…©äººåŒæ™‚ç”³è¾¦æ–°æœƒå“¡ï¼ˆåˆ†æ”¤é è¨‚ï¼‰</h2>
    <ul>
      <li>æˆ¿åƒ¹ ${hafhHC} â’½ æ‹†åŠå¾Œæ¯äººéœ€ ${perPerson} â’½ã€€å¸³è™Ÿé–‹å±€ 300 â’½ï¼Œå·®é¡ ${diffB} â’½ /äºº</li>
      <li>æ¯äººåŠ è³¼ä»£å¹£çµ„åˆï¼š${purchaseList(purchaseB)}</li>
      <li>æ¯äººé¦–æœˆæœƒè²»ï¼š${format(439)}</li>
    </ul>
    <div class="cost-summary">
      <span class="cost-label">ç¸½æˆæœ¬ï¼š</span>
      <span class="cost-main">${format(totalCostB)}</span>
    </div>
    <div class="cost-summary">
      <span class="cost-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
      <span class="cost-main">${format(officialPrice)}</span>
      <span class="cost-pct ${percentB >= 1 ? 'bad' : 'good'}">ç´„ç‚º${formatPercent(percentB)}</span>
    </div>
  </div>
  `;
  html += `
  <div class="result-block">
    <h2>æ–¹æ¡ˆ Cï½œèˆŠæœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½</h2>
    <ul>
      <li>èˆŠæœƒå“¡èˆ‡æœ‹å‹å„éœ€ ${perPerson} â’½<br>èˆŠæœƒå“¡åŠ è³¼ï¼š${purchaseList(purchaseC_old)}<br>æ–°æœƒå“¡åŠ è³¼ï¼š${purchaseList(purchaseC_new)}<br>æœ‹å‹é¦–æœˆåŠ å…¥æœˆè²»ï¼š${format(439)}</li>
    </ul>
    <div class="cost-summary">
      <span class="cost-label">ç¸½æˆæœ¬ï¼š</span>
      <span class="cost-main">${format(totalCostC)}</span>
    </div>
    <div class="cost-summary">
      <span class="cost-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
      <span class="cost-main">${format(officialPrice)}</span>
      <span class="cost-pct ${percentC >= 1 ? 'bad' : 'good'}">ç´„ç‚º${formatPercent(percentC)}</span>
    </div>
  </div>
  `;
  html += `
  <div style="margin:20px auto 0 auto;max-width:500px;text-align:center;">
    <span style="font-size:1.08em;color:var(--brand-dark);">
      ğŸ’¡ ç¾åœ¨ç«‹å³ä½¿ç”¨ <a href="https://www.hafh.com/zh-tw/invite/tw/EDXTKX?utm_source=calculator&utm_medium=yh&utm_campaign=tw70off" style="color:var(--brand-main);font-weight:700;text-decoration:underline;" target="_blank">æˆ‘çš„é‚€è«‹é€£çµ</a>
      å®Œæˆä»˜è²»åŠ å…¥ï¼Œäº«æœ‰é¦–æœˆ 3 æŠ˜èˆ‡é‚€è«‹ç¦®é‡ 100 â’½ å„ªæƒ é–‹å§‹ç´¯ç©ï¼
    </span>
  </div>
  `;
  document.getElementById('output').innerHTML = html;
}
</script>
</body>
</html>
