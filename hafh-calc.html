<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>HafH Taiwan 2025 é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --brand-purple: #7149ce;
      --brand-bg: #f6f6f8;
      --brand-dark: #342d3e;
      --brand-info: #e363bf;
      --brand-coin: #f0e179;
      --brand-danger: #f96983;
      --brand-success: #1dbace;
      --gray-main: #7d7485;
      --gray-sub: #9b93a3;
      --gray-footer: #e8e8ec;
      --input-bg: #fff;
      --footer-bg: #fff;
      --box-shadow: 0 3px 16px #0001;
      --radius: 18px;
      --font-main: 'Noto Sans TC', 'Segoe UI', Arial, 'Microsoft JhengHei', sans-serif;
    }
    body {
      font-family: var(--font-main);
      background: var(--brand-bg);
      color: var(--brand-dark);
      margin: 0;
    }
    .main {
      max-width: 420px;
      margin: 44px auto 0 auto;
      padding: 0 8px 60px 8px;
    }
    .title {
      font-size: 2.1em;
      font-weight: 700;
      margin: 0 0 10px 0;
      letter-spacing: 1px;
      color: var(--brand-dark);
      text-align: center;
      line-height: 1.1;
    }
    .subtitle {
      background: var(--input-bg);
      color: var(--brand-purple);
      font-size: 1em;
      border-radius: var(--radius);
      margin: 32px auto 30px auto;
      max-width: 99vw;
      padding: 18px 18px 13px 22px;
      text-align: left;
      line-height: 1.7;
      box-shadow: var(--box-shadow);
    }
    .info-block {
      background: var(--input-bg);
      border-radius: var(--radius);
      box-shadow: var(--box-shadow);
      max-width: 99vw;
      margin: 0 auto 22px auto;
      padding: 22px 24px 22px 24px;
      line-height: 1.55;
      color: var(--brand-dark);
    }
    .section-title {
      font-size: 1.3em;
      font-weight: 700;
      margin: 0 0 4px 0;
      letter-spacing: 0.5px;
      color: var(--brand-dark);
    }
    .section-sub {
      font-size: 1em;
      color: var(--gray-main);
      margin-bottom: 7px;
      font-weight: 400;
    }
    .token-table {
      font-size: 1.12em;
      margin-bottom: 6px;
      margin-top: 6px;
      letter-spacing: 0.2px;
      font-weight: 500;
    }
    .token-note {
      color: var(--brand-coin);
      font-size: 1em;
      margin-top: 6px;
      font-weight: 500;
      margin-bottom: 0;
    }
    .token-note2 {
      color: var(--brand-purple);
      font-size: 1em;
      font-weight: 500;
      margin-top: 10px;
      margin-bottom: 0;
    }
    .input-card {
      background: var(--input-bg);
      margin: 22px auto 20px auto;
      padding: 18px 22px 15px 22px;
      max-width: 99vw;
      border-radius: 14px;
      box-shadow: var(--box-shadow);
      text-align: left;
      font-size: 1.02em;
    }
    .input-card label {
      font-size: 1em;
      font-weight: 500;
      margin-bottom: 1px;
      margin-top: 12px;
      display: block;
      color: var(--brand-dark);
    }
    .input-card input[type="number"] {
      width: 100%;
      font-size: 1.09em;
      padding: 8px 10px;
      border: 1.3px solid #dedede;
      border-radius: 7px;
      outline: none;
      background: #f6f6f6;
      margin-bottom: 7px;
      color: #333;
      box-sizing: border-box;
    }
    .input-card input[type="number"]::placeholder {
      color: #aaa;
      font-size: 1em;
      font-weight: 400;
      opacity: 1;
    }
    .input-card button {
      background: var(--brand-purple);
      color: #fff;
      border: none;
      border-radius: 7px;
      font-size: 1.12em;
      font-weight: 700;
      padding: 11px 0;
      width: 100%;
      margin-top: 15px;
      cursor: pointer;
      transition: background .15s;
      letter-spacing: 1px;
    }
    .input-card button:hover { background: #885fe6; }
    #output {
      margin: 0 auto 0 auto;
      max-width: 99vw;
      text-align: left;
    }
    .result-block {
      background: var(--input-bg);
      border-radius: 15px;
      box-shadow: var(--box-shadow);
      margin: 28px auto 18px auto;
      padding: 23px 23px 17px 23px;
      text-align: left;
      min-width: 0;
      font-size: 1em;
    }
    .result-block h2 {
      font-size: 1.15em;
      font-weight: 700;
      margin: 0 0 8px 0;
      color: var(--brand-dark);
      line-height: 1.3;
    }
    .result-block ul {
      margin: 0 0 15px 0;
      padding-left: 1.5em;
      font-size: 1em;
      line-height: 1.7;
      color: var(--gray-main);
    }
    .result-summary {
      margin: 14px 0 0 0;
      padding: 14px 14px 14px 14px;
      background: #f6f6f8;
      border-radius: 12px;
      border: 2px solid #f0e179;
      display: flex;
      align-items: center;
      gap: 1.3em;
      flex-wrap: wrap;
      justify-content: space-between;
      font-size: 1.12em;
      line-height: 1.3;
    }
    .result-sum-txt {
      display: flex;
      gap: 1.7em;
      align-items: center;
      flex-wrap: wrap;
    }
    .result-label,
    .result-cost {
      font-weight: 600;
      color: var(--brand-dark);
      font-size: 1em;
    }
    .result-cost {
      font-size: 1.25em;
      margin-right: 8px;
      letter-spacing: 0.3px;
    }
    .summary-note {
      font-size: 1.09em;
      font-weight: 700;
      text-align: left;
      margin-left: 1em;
    }
    .summary-note.purple { color: var(--brand-purple);}
    .summary-note.danger { color: var(--brand-danger);}
    .footer-note {
      background: var(--footer-bg);
      margin: 34px auto 0 auto;
      max-width: 99vw;
      border-radius: 13px;
      box-shadow: var(--box-shadow);
      padding: 14px 20px 14px 20px;
      color: #7d7485;
      font-size: 0.98em;
      text-align: left;
      line-height: 1.7;
    }
    .invite-block {
      margin: 30px auto 0 auto;
      max-width: 99vw;
      text-align: center;
      border-radius: 12px;
      border: 2px solid var(--brand-success);
      padding: 18px 12px 14px 12px;
      font-size: 1.11em;
      color: var(--brand-dark);
      font-weight: 500;
      background: #fff;
    }
    .invite-block a {
      color: var(--brand-purple);
      font-weight: 700;
      text-decoration: underline;
    }
    @media (max-width: 700px) {
      .main { max-width: 99vw; }
      .subtitle, .info-block, .input-card, .result-block, .footer-note, .invite-block { padding-left: 5vw; padding-right: 5vw; }
      .result-summary { flex-direction: column; gap: 0.4em; align-items: flex-start; }
      .result-sum-txt { flex-direction: column; gap: 0.1em;}
    }
    @media (max-width: 400px) {
      .title { font-size: 1.13em;}
      .subtitle, .info-block, .input-card, .result-block, .footer-note, .invite-block { padding-left: 3vw; padding-right: 3vw; }
    }
  </style>
</head>
<body>
  <div class="main">
    <div class="title">HafH Taiwan 2025<br>é¦–æœˆ 3 æŠ˜æ´»å‹•è¨ˆç®—æ©Ÿ</div>
    <div class="subtitle">
      ãƒ»æ–°æœƒå“¡é è¨­ä½¿ç”¨é‚€è«‹ç¢¼åŠ å…¥ï¼Œå³å¸³æˆ¶æœ‰ 300 â’½ï¼Œæ‰€æœ‰è¨ˆç®—ä»¥æ­¤ç‚ºå‰æã€‚<br>
      ãƒ»è«‹è¼¸å…¥èˆ‡å®˜æ–¹ç¶²ç«™ç›¸åŒæ¢ä»¶çš„é‡‘é¡ï¼ˆå¦‚æ—¥æœŸã€äººæ•¸ã€å–æ¶ˆè¦å‰‡ï¼‰ï¼Œä¸”çš†ç‚ºæ–°å°å¹£ã€‚<br>
      ãƒ»ç”¨æˆ¶è‡ªè£½å°å·¥å…·ï¼Œå¯èƒ½æœ‰ bugï¼Œåƒ…ä¾›åƒè€ƒ
    </div>
    <div class="info-block">
      <div class="section-title">æ–°æ‰‹åŒ…</div>
      <div class="section-sub">ï¼ˆé™æ–°æœƒå“¡é¦–æ¬¡è¨»å†Šï¼Œå„çµ„é™è³¼ 1 æ¬¡ï¼‰</div>
      <div class="token-table">
        100 â’½ã€€NT$720 (9æŠ˜å„ªæƒ )<br>
        300 â’½ã€€NT$2,040 (85æŠ˜å„ªæƒ )<br>
        600 â’½ã€€NT$3,840 (8æŠ˜å„ªæƒ )
      </div>
      <div class="token-note">æ–°æ‰‹åŒ…åƒ…åœ¨æ–°æœƒå“¡ä»˜è²»åŠ å…¥å¾Œï¼Œ7/28 å‰å¯è³¼è²·ï¼Œå„çµ„é™è³¼ä¸€æ¬¡ã€‚</div>
      <div style="height:16px;"></div>
      <div class="section-title">æŒ‡å®šä»£å¹£çµ„åˆ</div>
      <div class="section-sub">ï¼ˆä¸é™æ¬¡æ•¸ï¼Œä»˜è²»æœƒå“¡çš†å¯è³¼è²·ï¼‰</div>
      <div class="token-table">200 â’½ã€€NT$1,440 (9æŠ˜å„ªæƒ )</div>
      <div class="token-note2">æŒ‡å®šä»£å¹£çµ„åˆå¯è³¼è²·ç›´åˆ°å¸³è™Ÿä¸Šé™ï¼Œ7/28 å‰éš¨æ™‚å¯è³¼è²·ã€‚</div>
    </div>
    <form class="input-card" onsubmit="showResult(); return false;">
      <label>HafH æ‰€éœ€ â’½ æ•¸ï¼š</label>
      <input id="hafhHC" type="number" placeholder="è«‹è¼¸å…¥æ•¸å­—ï¼Œä¾‹å¦‚ 430">
      <label>å®˜ç¶²åƒ¹æ ¼ï¼ˆNT$ï¼‰ï¼š</label>
      <input id="officialPrice" type="number" placeholder="è«‹è¼¸å…¥æ•¸å­—ï¼Œä¾‹å¦‚ 4400">
      <button type="submit">è¨ˆç®—</button>
    </form>
    <div id="output"></div>
    <div class="invite-block">
      ğŸ’¡ ç¾åœ¨ç«‹å³ä½¿ç”¨ <a href="https://www.hafh.com/zh-tw/invite/tw/EDXTKX?utm_source=calculator&utm_medium=yh&utm_campaign=tw70off" target="_blank">æˆ‘çš„é‚€è«‹é€£çµ</a>
      å®Œæˆä»˜è²»åŠ å…¥ï¼Œäº«æœ‰é¦–æœˆ 3 æŠ˜èˆ‡é‚€è«‹ç¦®é‡ 100 â’½ å„ªæƒ é–‹å§‹ç´¯ç©ï¼
    </div>
    <div class="footer-note">
      1. æ­¤è©¦ç®—é é¢ç‚ºç²—ç•¥ä¼°ç®—ï¼Œç‚ºæ±‚è¬¹æ…è«‹è‡ªè¡Œä¾ç…§æ©Ÿåˆ¶å†å¤šæ¬¡è©¦ç®—ä¸€éã€‚<br>
      2. ä»˜è²»åŠ å…¥ç•¶å¤©ç‚ºçµç®—æ—¥ï¼Œä¸”ç‚ºç¬¬ä¸€æ¬¡æ‰£æ¬¾ã€‚åˆ°ç¬¬ä¸‰æ¬¡æ‰£æ¬¾æ™‚å¸³è™Ÿæœƒå‡ç´šç‚º Silver VIPï¼Œäº«æœ‰æ¯ç­†è¨‚æˆ¿ 95 æŠ˜ã€‚<br>
      3. æœ‰é ç´„çš„ç‹€æ³ä¸‹ç„¡æ³•è®Šæ›´ç‚ºä¼‘çœ æœƒç±ã€‚è‹¥æœ‰è·¨æœˆå‰‡éœ€è€ƒæ…®æ˜¯å¦ç¶“éçµç®—æ—¥ã€‚æ‰£æ¬¾åŒæ™‚äº¦æœ‰ 200 â’½ å…¥å¸³ã€‚
    </div>
  </div>
  <script>
    // æ–°æ‰‹åŒ…çµ„åˆèˆ‡æŒ‡å®šä»£å¹£çµ„åˆè¨­å®š
    const starterPacks = [
      { qty: 600, price: 3840 },
      { qty: 300, price: 2040 },
      { qty: 100, price: 720 }
    ];
    const regularPack = { qty: 200, price: 1440 };

    function format(num) { return "NT$" + num.toLocaleString(); }
    function formatPercent(num) { return (num*100).toFixed(1) + "%"; }

    // å‹•æ…‹çµ„åˆæ‰¾æœ€å°é‡‘é¡ï¼ˆå›å‚³ï¼š[{qty, price, type, count}]ï¼‰
    function getTokenPurchasePlan(diff, canStarter) {
      if (diff <= 0) return [];
      const packs = [
        ...(canStarter ? [
          { type: 'starter', qty: 100, price: 720, max: 1 },
          { type: 'starter', qty: 300, price: 2040, max: 1 },
          { type: 'starter', qty: 600, price: 3840, max: 1 },
        ] : []),
        { type: 'regular', qty: 200, price: 1440, max: 99 }
      ];
      let maxToken = diff + 600;
      let cost = Array(maxToken+1).fill(Infinity);
      let path = Array(maxToken+1).fill(null);
      cost[0] = 0; path[0] = [];
      let sMax = canStarter ? 1 : 0;
      for (let s100 = 0; s100 <= sMax; ++s100)
      for (let s300 = 0; s300 <= sMax; ++s300)
      for (let s600 = 0; s600 <= sMax; ++s600) {
        let tokens = 100 * s100 + 300 * s300 + 600 * s600;
        let amount = 720 * s100 + 2040 * s300 + 3840 * s600;
        for (let r = 0; r <= Math.ceil(maxToken/200); ++r) {
          let totalTokens = tokens + 200 * r;
          let totalAmount = amount + 1440 * r;
          if (totalTokens >= diff && totalTokens <= maxToken) {
            if (totalAmount < cost[totalTokens]) {
              cost[totalTokens] = totalAmount;
              path[totalTokens] = [
                ...(canStarter ? [
                  { type: 'starter', qty: 100, price: 720, count: s100 },
                  { type: 'starter', qty: 300, price: 2040, count: s300 },
                  { type: 'starter', qty: 600, price: 3840, count: s600 },
                ] : []),
                { type: 'regular', qty: 200, price: 1440, count: r }
              ].filter(p => p.count > 0);
            }
          }
        }
      }
      let min = Infinity, minPlan = null;
      for (let t = diff; t <= maxToken; ++t) {
        if (cost[t] < min) { min = cost[t]; minPlan = path[t]; }
      }
      return minPlan || [];
    }

    function showResult() {
      const hafhHC = parseInt(document.getElementById('hafhHC').value, 10);
      const officialPrice = parseInt(document.getElementById('officialPrice').value, 10);
      if (isNaN(hafhHC) || isNaN(officialPrice) || hafhHC <= 0 || officialPrice <= 0) {
        document.getElementById('output').innerHTML = '<div style="color:#d00;padding:1.5em 0;font-weight:bold;text-align:center;">è«‹æ­£ç¢ºè¼¸å…¥æ‰€éœ€ HafH ä»£å¹£èˆ‡å®˜ç¶²åƒ¹æ ¼</div>';
        return;
      }
      // æ–¹æ¡ˆ Aï¼šä¸€äººç”³è¾¦æ–°æœƒå“¡
      let diffA = Math.max(0, hafhHC - 300);
      let purchaseA = getTokenPurchasePlan(diffA, true);
      let totalCostA = 439;
      let purchaseStrA = purchaseA.length > 0 ? purchaseA.map(p =>
        (p.type==='starter' ? "æ–°æ‰‹åŒ… " : "æŒ‡å®šä»£å¹£çµ„åˆ ") + p.qty + " â’½ Ã—" + p.count + "<span style='color:#bdbdbd;'>ï¼ˆ" + format(p.price * p.count) + "ï¼‰</span>"
      ).join("<br>") : "é¤˜é¡è¶³å¤ ç„¡éœ€åŠ è³¼";
      totalCostA += purchaseA.reduce((sum, p) => sum + p.price * p.count, 0);
      let percentA = totalCostA / officialPrice;
      let percentStrA = `ç´„ç‚ºæä¾›çš„å®˜ç¶²åƒ¹ä¹‹ <span class="${percentA >= 1 ? 'danger' : 'purple'}">${formatPercent(percentA)}</span> åƒ¹æ ¼`;

      // æ–¹æ¡ˆ Bï¼šå…©äººåŒæ™‚ç”³è¾¦æ–°æœƒå“¡
      let perPerson = Math.ceil(hafhHC/2);
      let diffB = Math.max(0, perPerson - 300);
      let purchaseB = getTokenPurchasePlan(diffB, true);
      let totalCostB = 439*2;
      let purchaseStrB = purchaseB.length > 0 ? purchaseB.map(p =>
        (p.type==='starter' ? "æ–°æ‰‹åŒ… " : "æŒ‡å®šä»£å¹£çµ„åˆ ") + p.qty + " â’½ Ã—" + p.count + "<span style='color:#bdbdbd;'>ï¼ˆ" + format(p.price * p.count) + "ï¼‰</span>"
      ).join("<br>") : "é¤˜é¡è¶³å¤ ç„¡éœ€åŠ è³¼";
      totalCostB += purchaseB.reduce((sum, p) => sum + p.price * p.count, 0) * 2;
      let percentB = totalCostB / officialPrice;
      let percentStrB = `ç´„ç‚ºæä¾›çš„å®˜ç¶²åƒ¹ä¹‹ <span class="${percentB >= 1 ? 'danger' : 'purple'}">${formatPercent(percentB)}</span> åƒ¹æ ¼`;

      // æ–¹æ¡ˆ Cï¼šèˆŠæœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½ï¼ˆèˆŠæœƒå“¡åªèƒ½è²·æŒ‡å®šä»£å¹£çµ„åˆï¼Œæ–°æœƒå“¡å¯ä»¥è²·æ–°æ‰‹åŒ…ï¼‰
      // èˆŠæœƒå“¡
      let diffC_old = perPerson;
      let purchaseC_old = getTokenPurchasePlan(diffC_old, false);
      let totalCostC_old = purchaseC_old.reduce((sum, p) => sum + p.price * p.count, 0);
      let purchaseStrC_old = purchaseC_old.length > 0 ? purchaseC_old.map(p =>
        (p.type==='starter' ? "æ–°æ‰‹åŒ… " : "æŒ‡å®šä»£å¹£çµ„åˆ ") + p.qty + " â’½ Ã—" + p.count + "<span style='color:#bdbdbd;'>ï¼ˆ" + format(p.price * p.count) + "ï¼‰</span>"
      ).join("<br>") : "é¤˜é¡è¶³å¤ ç„¡éœ€åŠ è³¼";
      // æ–°æœƒå“¡
      let diffC_new = perPerson - 300;
      let purchaseC_new = diffC_new > 0 ? getTokenPurchasePlan(diffC_new, true) : [];
      let totalCostC_new = 439 + purchaseC_new.reduce((sum, p) => sum + p.price * p.count, 0);
      let purchaseStrC_new = purchaseC_new.length > 0 ? purchaseC_new.map(p =>
        (p.type==='starter' ? "æ–°æ‰‹åŒ… " : "æŒ‡å®šä»£å¹£çµ„åˆ ") + p.qty + " â’½ Ã—" + p.count + "<span style='color:#bdbdbd;'>ï¼ˆ" + format(p.price * p.count) + "ï¼‰</span>"
      ).join("<br>") : "æ–°æœƒå“¡ç„¡éœ€åŠ è³¼";
      let totalCostC = totalCostC_old + totalCostC_new;
      let percentC = totalCostC / officialPrice;
      let percentStrC = `ç´„ç‚ºæä¾›çš„å®˜ç¶²åƒ¹ä¹‹ <span class="${percentC >= 1 ? 'danger' : 'purple'}">${formatPercent(percentC)}</span> åƒ¹æ ¼`;

      let html = '';
      // æ–¹æ¡ˆA
      html += `
      <div class="result-block">
        <h2>æ–¹æ¡ˆ Aï½œä¸€äººç”³è¾¦æ–°æœƒå“¡</h2>
        <ul>
          <li>å¸³è™Ÿé–‹å±€ç‚º 300 â’½ï¼Œå¯¦éš›éœ€è¦ ${hafhHC} â’½ï¼Œå·®é¡ ${diffA} â’½</li>
          <li>åŠ è³¼ä»£å¹£çµ„åˆï¼š<br>${purchaseStrA}</li>
          <li>é¦–æœˆæœƒè²»ï¼š${format(439)}</li>
        </ul>
        <div class="result-summary">
          <div class="result-sum-txt">
            <span class="result-label">ç¸½æˆæœ¬ï¼š</span>
            <span class="result-cost">${format(totalCostA)}</span>
            <span class="result-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
            <span class="result-cost">${format(officialPrice)}</span>
          </div>
          <div class="summary-note ${percentA >= 1 ? 'danger' : 'purple'}">${percentStrA}</div>
        </div>
      </div>
      `;
      // æ–¹æ¡ˆB
      html += `
      <div class="result-block">
        <h2>æ–¹æ¡ˆ Bï½œå…©äººåŒæ™‚ç”³è¾¦æ–°æœƒå“¡ï¼ˆåˆ†æ”¤é è¨‚ï¼‰</h2>
        <ul>
          <li>æˆ¿åƒ¹ ${hafhHC} â’½ æ‹†åŠå¾Œæ¯äººéœ€ ${perPerson} â’½ï¼Œå¸³è™Ÿé–‹å±€ 300 â’½ï¼Œå·®é¡ ${diffB} â’½ /äºº</li>
          <li>æ¯äººåŠ è³¼ä»£å¹£çµ„åˆï¼š<br>${purchaseStrB}</li>
          <li>æ¯äººé¦–æœˆæœƒè²»ï¼š${format(439)}</li>
        </ul>
        <div class="result-summary">
          <div class="result-sum-txt">
            <span class="result-label">ç¸½æˆæœ¬ï¼š</span>
            <span class="result-cost">${format(totalCostB)}</span>
            <span class="result-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
            <span class="result-cost">${format(officialPrice)}</span>
          </div>
          <div class="summary-note ${percentB >= 1 ? 'danger' : 'purple'}">${percentStrB}</div>
        </div>
      </div>
      `;
      // æ–¹æ¡ˆC
      html += `
      <div class="result-block">
        <h2>æ–¹æ¡ˆ Cï½œèˆŠæœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½</h2>
        <ul>
          <li>èˆŠæœƒå“¡èˆ‡æœ‹å‹å„éœ€ ${perPerson} â’½<br>
          èˆŠæœƒå“¡å…¨é¡åŠ è³¼ï¼š<br>${purchaseStrC_old}<br>
          æ–°æœƒå“¡é¦–æœˆæœƒè²»ï¼š${format(439)}<br>
          æ–°æœƒå“¡åŠ è³¼ï¼š<br>${purchaseStrC_new}</li>
        </ul>
        <div class="result-summary">
          <div class="result-sum-txt">
            <span class="result-label">ç¸½æˆæœ¬ï¼š</span>
            <span class="result-cost">${format(totalCostC)}</span>
            <span class="result-label">æ‚¨è¼¸å…¥çš„å®˜ç¶²åƒ¹ï¼š</span>
            <span class="result-cost">${format(officialPrice)}</span>
          </div>
          <div class="summary-note ${percentC >= 1 ? 'danger' : 'purple'}">${percentStrC}</div>
        </div>
      </div>
      `;
      document.getElementById('output').innerHTML = html;
    }
  </script>
</body>
</html>
