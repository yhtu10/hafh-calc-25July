
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HafH æ´»å‹•æ–¹æ¡ˆæ¯”åƒ¹è©¦ç®—å™¨</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
    input, select { width: 100%; padding: 8px; margin: 8px 0; }
    .result { margin-top: 24px; padding: 16px; border: 1px solid #ccc; border-radius: 8px; background: #f9f9f9; }
  </style>
</head>
<body>
  <h2>HafH ä½å®¿æ¯”åƒ¹è©¦ç®—å™¨</h2>
  <p>è«‹å…ˆè¼¸å…¥ä¸‹åˆ—è³‡æ–™ï¼š</p>

  <label>å¹¾äººå…¥ä½ï¼š</label>
  <select id="people">
    <option value="1">1 äºº</option>
    <option value="2">2 äºº</option>
  </select>

  <label>æ˜¯å¦ç‚ºæ–°æœƒå“¡ï¼š</label>
  <select id="isNew">
    <option value="yes">æ˜¯</option>
    <option value="no">å¦</option>
  </select>

  <label>æ˜¯å¦ä½¿ç”¨é‚€è«‹ç¢¼ï¼š</label>
  <select id="hasCode">
    <option value="yes">æ˜¯</option>
    <option value="no">å¦</option>
  </select>

  <label>å®˜ç¶²åƒ¹æ ¼ï¼ˆè«‹è¼¸å…¥å°å¹£æˆ–æ—¥å¹£æ•´æ•¸ï¼‰ï¼š</label>
  <input type="number" id="officialPrice" placeholder="ä¾‹å¦‚ï¼š39425">

  <label>éœ€è¦ â’½ æ•¸é‡ï¼š</label>
  <input type="number" id="hafhCoins" placeholder="ä¾‹å¦‚ï¼š960">

  <button onclick="calculate()">ç«‹å³è©¦ç®—</button>

  <div class="result" id="resultBox" style="display:none"></div>

  <script>
    function calculate() {
      const people = parseInt(document.getElementById('people').value);
      const isNew = document.getElementById('isNew').value === 'yes';
      const hasCode = document.getElementById('hasCode').value === 'yes';
      const officialPrice = parseInt(document.getElementById('officialPrice').value);
      const hafhCoins = parseInt(document.getElementById('hafhCoins').value);
      const coinToNT = 7.25;
      let result = '';

      if (isNaN(officialPrice) || isNaN(hafhCoins)) {
        alert('è«‹å®Œæ•´å¡«å¯«æ‰€æœ‰æ¬„ä½');
        return;
      }

      let coinNeededA = hafhCoins;
      let costA = 439;
      if (coinNeededA > 300) {
        let extraCoins = coinNeededA - 300;
        if (extraCoins <= 100) costA += 720;
        else if (extraCoins <= 300) costA += 2040;
        else if (extraCoins <= 600) costA += 3840;
        else costA += 3840 + 1440;
      }

      let halfCoins = Math.ceil(hafhCoins / 2);
      let costB = 439 + 1440;
      let costB_total = costB * 2;

      let costC_friend = 439 + 1440;
      let costC_you = Math.ceil(hafhCoins / 2 * coinToNT);
      let inviteBonus = hasCode ? 200 * coinToNT : 0;
      let costC_total = costC_you + costC_friend - inviteBonus;

      result += `<h3>æ–¹æ¡ˆ Aï½œæ–°æœƒå“¡å–®äººå…¥ä½</h3>`;
      result += `ç¸½æˆæœ¬ï¼šç´„ NT$${Math.round(costA)}<br>`;
      result += `ç›¸å°å®˜ç¶²ç¯€çœï¼šç´„ ${Math.round(100 - costA / officialPrice * 100)}%<hr>`;

      result += `<h3>æ–¹æ¡ˆ Bï½œæ–°æœƒå“¡é›™äººå…¥ä½åˆ†æ”¤</h3>`;
      result += `ğŸ’¡ é©åˆå…©ä½æ–°æœƒå“¡ä¸€èµ·è¨‚æˆ¿ä¸¦ä½¿ç”¨åˆ†æ”¤åŠŸèƒ½<br>`;
      result += `- æ¯äººéœ€ ${halfCoins} â’½ï¼Œè¨»å†Šé€ 300 â’½ â†’ æ¯äººè£œ 200 â’½<br>`;
      result += `- è£œè²· 200 â’½ æŒ‡å®šä»£å¹£çµ„åˆï¼šNT$1440ï¼ˆæ¯äººï¼‰<br>`;
      result += `- é¦–æœˆæœƒè²»ï¼šNT$439ï¼ˆæ¯äººï¼‰<br>`;
      result += `âœ… å…©äººç¸½æˆæœ¬ï¼šç´„ NT$${Math.round(costB_total)}<br>`;
      result += `ğŸ“‰ ç¯€çœï¼šç´„ ${Math.round(100 - costB_total / officialPrice * 100)}% ç›¸è¼ƒå®˜ç¶² NT$${officialPrice}<hr>`;

      result += `<h3>æ–¹æ¡ˆ Cï½œè€æœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½</h3>`;
      result += `ç¸½æˆæœ¬ï¼šç´„ NT$${Math.round(costC_total)}<br>`;
      result += `ç›¸å°å®˜ç¶²ç¯€çœï¼šç´„ ${Math.round(100 - costC_total / officialPrice * 100)}%<hr>`;

      result += `<p>ğŸ‘‰ å»ºè­°ï¼šæ ¹æ“šç›®å‰æ¢ä»¶ï¼Œã€Œæ–¹æ¡ˆ ${bestOption(costA, costB_total, costC_total)}ã€æœ€åˆ’ç®—ï¼</p>`;
      result += `<p>ğŸ“Œ é¦¬ä¸Šä½¿ç”¨ HafH è¨»å†Šï¼š<a href="https://www.hafh.com/invite?code=TW30RC" target="_blank">é»æˆ‘ä½¿ç”¨é‚€è«‹ç¢¼</a></p>`;

      document.getElementById('resultBox').innerHTML = result;
      document.getElementById('resultBox').style.display = 'block';
    }

    function bestOption(a, b, c) {
      let min = Math.min(a, b, c);
      if (min === a) return 'A';
      if (min === b) return 'B';
      return 'C';
    }
  </script>
</body>
</html>
