
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>HafH æ´»å‹•è¨ˆç®—æ©Ÿ</title>
    <style>
        body { font-family: "Noto Sans TC", sans-serif; padding: 20px; background: #f9f9f9; }
        h1 { color: #333; }
        label { display: block; margin-top: 10px; }
        input { margin-bottom: 10px; padding: 5px; width: 200px; }
        button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
        .result { margin-top: 20px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
        .footer { font-size: 0.9em; color: #666; margin-top: 40px; line-height: 1.6; }
    </style>
    <script>
        function formatCurrency(num) {
            return "NT$" + num.toLocaleString();
        }

        function getMinCostPackage(diff) {
            const packages = [
                { label: "æ–°æ‰‹åŒ… 100 â’½", hc: 100, cost: 720, type: "starter" },
                { label: "æ–°æ‰‹åŒ… 300 â’½", hc: 300, cost: 1920, type: "starter" },
                { label: "æŒ‡å®šä»£å¹£çµ„åˆ 200 â’½", hc: 200, cost: 1440, type: "regular" },
                { label: "æŒ‡å®šä»£å¹£çµ„åˆ 300 â’½", hc: 300, cost: 2160, type: "regular" },
            ];

            let result = [];
            function search(current, remaining, used) {
                if (remaining <= 0) {
                    if (!result.length || current < result.reduce((a, b) => a + b.cost, 0)) {
                        result = [...used];
                    }
                    return;
                }
                for (let p of packages) {
                    if ((p.type === "starter" && used.some(u => u.type === "starter" && u.hc === p.hc)) ||
                        (p.type === "regular" && used.filter(u => u.type === "regular" && u.hc === p.hc).length >= 2)) {
                        continue;
                    }
                    search(current + p.cost, remaining - p.hc, [...used, p]);
                }
            }
            search(0, diff, []);
            return result;
        }

        function calculate() {
            const hafhHC = parseInt(document.getElementById("hafhHC").value);
            const officialPrice = parseInt(document.getElementById("officialPrice").value);

            const output = document.getElementById("output");
            output.innerHTML = "";

            let resultHTML = "";

            // æ–¹æ¡ˆ Aï¼šå–®äººå…¥ä½
            let hcNeededA = hafhHC;
            let hcStartA = 300;
            let hcDiffA = hcNeededA - hcStartA;
            let costItemsA = [];
            if (hcDiffA > 0) {
                const add = getMinCostPackage(hcDiffA);
                costItemsA = add.map(x => x.label + "ï¼ˆ" + formatCurrency(x.cost) + "ï¼‰");
            }
            let totalCostA = 439 + (costItemsA.reduce((a, b) => a + parseInt(b.match(/NT\$(\d+)/)[1].replace(/,/g, "")), 0));
            resultHTML += `<div class="result"><h2>æ–¹æ¡ˆ Aï½œæ–°æœƒå“¡å–®äººå…¥ä½</h2>`;
            resultHTML += `<p>å¸³è™Ÿé–‹å±€ç‚º 300 â’½ï¼Œå¯¦éš›éœ€è¦ ${hcNeededA} â’½ï¼Œå·®é¡ ${hcDiffA > 0 ? hcDiffA : 0} â’½</p>`;
            if (hcDiffA > 0) resultHTML += `<p>åŠ è³¼ä»£å¹£çµ„åˆï¼š${costItemsA.join("ï¼‹")}</p>`;
            resultHTML += `<p>é¦–æœˆæœƒè²»ï¼š${formatCurrency(439)}</p>`;
            resultHTML += `<p>ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalCostA)}</p>`;
            resultHTML += `<p>ğŸ“‰ ç‚ºå®˜ç¶²åƒ¹æ ¼çš„ ${(totalCostA / officialPrice * 100).toFixed(1)}% åƒ¹æ ¼</p></div>`;

            // æ–¹æ¡ˆ Bï¼šé›™äººåˆ†æ”¤
            let hcEachB = Math.ceil(hafhHC / 2);
            let hcDiffB = hcEachB - 300;
            let costItemsB = [];
            if (hcDiffB > 0) {
                const add = getMinCostPackage(hcDiffB);
                costItemsB = add.map(x => x.label + "ï¼ˆ" + formatCurrency(x.cost) + "ï¼‰");
            }
            let totalEachB = 439 + (costItemsB.reduce((a, b) => a + parseInt(b.match(/NT\$(\d+)/)[1].replace(/,/g, "")), 0));
            let totalCostB = totalEachB * 2;
            resultHTML += `<div class="result"><h2>æ–¹æ¡ˆ Bï½œæ–°æœƒå“¡é›™äººå…¥ä½åˆ†æ”¤</h2>`;
            resultHTML += `<p>æˆ¿åƒ¹ ${hafhHC} â’½ æ‹†åŠå¾Œæ¯äººéœ€ ${hcEachB} â’½</p>`;
            resultHTML += `<p>æ–°æœƒå“¡å¸³è™Ÿé–‹å±€çš†ç‚º 300 â’½ï¼Œå·®é¡ ${hcDiffB > 0 ? hcDiffB : 0} â’½ï¼äºº</p>`;
            if (hcDiffB > 0) resultHTML += `<p>æ¯äººåŠ è³¼ä»£å¹£çµ„åˆï¼š${costItemsB.join("ï¼‹")}</p>`;
            resultHTML += `<p>é¦–æœˆæœƒè²»ï¼š${formatCurrency(439)}ï¼äºº</p>`;
            resultHTML += `<p>ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalCostB)}ï¼ˆ${formatCurrency(totalEachB)}ï¼äººï¼‰</p>`;
            resultHTML += `<p>ğŸ“‰ ç‚ºå®˜ç¶²åƒ¹æ ¼çš„ ${(totalCostB / officialPrice * 100).toFixed(1)}% åƒ¹æ ¼</p></div>`;

            // æ–¹æ¡ˆ Cï¼šè€æœƒå“¡é‚€è«‹æœ‹å‹
            let hcNeededC = Math.ceil(hafhHC / 2);
            let costItemsC = getMinCostPackage(hcNeededC).map(x => x.label + "ï¼ˆ" + formatCurrency(x.cost) + "ï¼‰");
            let totalCostC = 439 + costItemsC.reduce((a, b) => a + parseInt(b.match(/NT\$(\d+)/)[1].replace(/,/g, "")), 0) + 2880;
            resultHTML += `<div class="result"><h2>æ–¹æ¡ˆ Cï½œè€æœƒå“¡é‚€è«‹æœ‹å‹ä¸€èµ·ä½</h2>`;
            resultHTML += `<p>è€æœƒå“¡èˆ‡æœ‹å‹å„éœ€ ${hcNeededC} â’½</p>`;
            resultHTML += `<p>è€æœƒå“¡è³¼è²·æŒ‡å®šä»£å¹£çµ„åˆå…©çµ„ 200 â’½ï¼ˆ${formatCurrency(1440)} Ã— 2 = ${formatCurrency(2880)}ï¼‰</p>`;
            resultHTML += `<p>æœ‹å‹é¦–æ¬¡åŠ å…¥èŠ±è²»ï¼š${formatCurrency(439)}</p>`;
            resultHTML += `<p>æœ‹å‹éœ€åŠ è³¼ä»£å¹£çµ„åˆï¼š${costItemsC.join("ï¼‹")}</p>`;
            resultHTML += `<p>ç¸½æˆæœ¬ï¼šç´„ ${formatCurrency(totalCostC)}</p>`;
            resultHTML += `<p>ğŸ“‰ ç‚ºå®˜ç¶²åƒ¹æ ¼çš„ ${(totalCostC / officialPrice * 100).toFixed(1)}% åƒ¹æ ¼</p></div>`;

            // çµå°¾æé†’
            resultHTML += `<div class="footer"><strong>æº«é¦¨æé†’ï¼š</strong><br>
            1. æ­¤è©¦ç®—é é¢ç‚ºç²—ç•¥ä¼°ç®—ï¼Œç‚ºæ±‚è¬¹æ…è«‹è‡ªè¡Œä¾ç…§é‚è¼¯å†æ¬¡è©¦ç®—ä¸€éã€‚<br>
            2. ä»˜è²»åŠ å…¥ç•¶å¤©ç‚ºçµç®—æ—¥ï¼Œä¸”ç‚ºç¬¬ä¸€æ¬¡æ‰£æ¬¾ã€‚åˆ°ç¬¬ä¸‰æ¬¡æ‰£æ¬¾æ™‚ï¼Œå¸³è™Ÿæœƒå‡ç´šç‚º Silver VIPï¼Œäº«æœ‰æ¯ç­†è¨‚æˆ¿ 95 æŠ˜ã€‚<br>
            3. æœ‰é ç´„çš„ç‹€æ³ä¸‹ç„¡æ³•è®Šæ›´ç‚ºä¼‘çœ æœƒç±ï¼Œè‹¥é ç´„æ—¥æœŸè·é›¢ç¾åœ¨é‚„æœƒç¶“éä¸€æ¬¡çµç®—æ—¥ï¼Œå‰‡æœƒæœ‰æ‰£æ¬¾ä¸¦åŒæ™‚æœ‰ 200 â’½ å…¥å¸³ã€‚
            </div>`;

            output.innerHTML = resultHTML;
        }
    </script>
</head>
<body>
    <h1>HafH â’½ æ´»å‹•è¨ˆç®—æ©Ÿï¼ˆæœ€çœæˆæœ¬æ¨è–¦ï¼‰</h1>
    <p>æé†’ï¼šæ–°æœƒå“¡é è¨­å¸³æˆ¶ä¸­æœ‰ 300 â’½ï¼Œæ‰€æœ‰è¨ˆç®—ä»¥æ­¤ç‚ºå‰æã€‚è«‹å¡«å¯«ç¬¦åˆç›¸åŒæ¢ä»¶ï¼ˆæ—¥æœŸã€äººæ•¸ã€å–æ¶ˆè¦å‰‡ï¼‰ä¸”ç‚ºæ–°å°å¹£çš„é‡‘é¡ã€‚</p>
    <label>HafH æ‰€éœ€ â’½ æ•¸ï¼š</label>
    <input id="hafhHC" type="number" value="750">
    <label>å®˜ç¶²åƒ¹æ ¼ï¼ˆNT$ï¼‰ï¼š</label>
    <input id="officialPrice" type="number" value="4400">
    <button onclick="calculate()">è¨ˆç®—</button>
    <div id="output"></div>
</body>
</html>
